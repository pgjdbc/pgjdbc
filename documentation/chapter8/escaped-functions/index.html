<!doctype html><html><head><meta charset=utf-8><title>Pgjdbc | Escaped scalar functions</title><link rel=stylesheet href=https://pgjdbc.github.io/pgjdbc/sass/main.e946902265096118ab63cb74d4453d2690cb98e02350ac6ad40325a645b55613.css integrity="sha256-6UaQImUJYRirY8t01EU9JpDLmOAjUKxq1AMlpkW1VhM="><link rel=icon href=favicon.ico type=image/x-icon><link rel="shortcut icon" href=favicon.ico type=image/x-icon></head><body><nav class=nav><a href=/pgjdbc><img src=/images/postgreslogo.svg></a><div class=nav__items><a class=nav__item href=/pgjdbc/development/>Development</a>
<a class=nav__item href=/pgjdbc/download/>Download</a>
<a class=nav__item href=/pgjdbc/documentation/>Documentation</a>
<a class=nav__item href=/pgjdbc/community/>Community</a></div><a href=https://github.com/pgjdbc/pgjdbc><img src=/images/github.svg></a></nav><main><div class=flex><nav role=navigation class=side__nav><ul><li><a href=/pgjdbc/documentation/chapter1/>Introduction</a><ul><li><a href=/pgjdbc/documentation/chapter1/intro/>Introduction</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter2/>Setting up the JDBC Driver</a><ul><li><a href=/pgjdbc/documentation/chapter2/setup/>Getting the Driver</a></li><li><a href=/pgjdbc/documentation/chapter2/classpath/>Setting up the Class Path</a></li><li><a href=/pgjdbc/documentation/chapter2/prepare/>Preparing the Database Server for JDBC</a></li><li><a href=/pgjdbc/documentation/chapter2/your-database/>Creating a Database</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter3/>Initializing the Driver</a><ul><li><a href=/pgjdbc/documentation/chapter3/use/>Importing JDBC</a></li><li><a href=/pgjdbc/documentation/chapter3/load/>Loading the Driver</a></li><li><a href=/pgjdbc/documentation/chapter3/connect/>Connecting to the Database</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter4/>Using SSL</a><ul><li><a href=/pgjdbc/documentation/chapter4/ssl/>Configuring the Server</a></li><li><a href=/pgjdbc/documentation/chapter4/ssl-client/>Configuring the Client</a></li><li><a href=/pgjdbc/documentation/chapter4/ssl-factory/>Custom SSLSocketFactory</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter5/>Issuing a Query and Processing the Result</a><ul><li><a href=/pgjdbc/documentation/chapter5/query/>Issuing a Query and Processing the Result</a></li><li><a href=/pgjdbc/documentation/chapter5/statement/>Using the Statement or PreparedStatement Interface</a></li><li><a href=/pgjdbc/documentation/chapter5/resultset/>Using the ResultSet Interface</a></li><li><a href=/pgjdbc/documentation/chapter5/update/>Performing Updates</a></li><li><a href=/pgjdbc/documentation/chapter5/ddl/>Creating and Modifying Database Objects</a></li><li><a href=/pgjdbc/documentation/chapter5/java8-date-time/>Using Java 8 Date and Time classes</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter6/>Calling Stored Functions and Procedures</a><ul><li><a href=/pgjdbc/documentation/chapter6/callproc/>Calling Stored Functions and Procedures</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter7/>Storing Binary Data</a><ul><li><a href=/pgjdbc/documentation/chapter7/binary-data/>Storing Binary Data</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter8/>JDBC escapes</a><ul><li><a href=/pgjdbc/documentation/chapter8/escapes/>JDBC escapes</a></li><li><a href=/pgjdbc/documentation/chapter8/outer-joins-escape/>Escape for outer joins</a></li><li><a href=/pgjdbc/documentation/chapter8/escapes-datetime/>Date-time escapes</a></li><li><a href=/pgjdbc/documentation/chapter8/escaped-functions/>Escaped scalar functions</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter9/>PostgreSQL™ Extensions to the JDBC API</a><ul><li><a href=/pgjdbc/documentation/chapter9/ext/>PostgreSQL™ Extensions to the JDBC API</a></li><li><a href=/pgjdbc/documentation/chapter9/geometric/>Geometric Data Types</a></li><li><a href=/pgjdbc/documentation/chapter9/largeobjects/>Large Objects</a></li><li><a href=/pgjdbc/documentation/chapter9/listennotify/>Listen / Notify</a></li><li><a href=/pgjdbc/documentation/chapter9/server-prepare/>Server Prepared Statements</a></li><li><a href=/pgjdbc/documentation/chapter9/parameterstatus/>Parameter Status Messages</a></li><li><a href=/pgjdbc/documentation/chapter9/replication/>Physical and Logical replication API</a></li><li><a href=/pgjdbc/documentation/chapter9/arrays/>Arrays</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter10/>Using the Driver in a Multithreaded or a Servlet Environment</a><ul><li><a href=/pgjdbc/documentation/chapter10/thread/>Using the Driver in a Multithreaded or a Servlet Environment</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter11/>Connection Pools and Data Sources</a><ul><li><a href=/pgjdbc/documentation/chapter11/datasource/>Connection Pools and Data Sources</a></li><li><a href=/pgjdbc/documentation/chapter11/ds-cpds/>Application Servers ConnectionPoolDataSource</a></li><li><a href=/pgjdbc/documentation/chapter11/ds-ds/>Applications DataSource</a></li><li><a href=/pgjdbc/documentation/chapter11/jndi/>Data Sources and JNDI</a></li><li><a href=/pgjdbc/documentation/chapter11/tomcat/>Tomcat setup</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter12/>Logging using java.util.logging</a><ul><li><a href=/pgjdbc/documentation/chapter12/logging/>Logging using java.util.logging</a></li></ul></li><li><a href=/pgjdbc/documentation/chapter13/>Further Reading</a><ul><li><a href=/pgjdbc/documentation/chapter13/reading/>Further Reading</a></li></ul></li></ul></nav><article><h1>Escaped scalar functions</h1><br><p>The JDBC specification defines functions with an escape call syntax : <code>{fn function_name(arguments)}</code>.
The following tables show which functions are supported by the PostgreSQL™ driver.
The driver supports the nesting and the mixing of escaped functions and escaped
values. The appendix C of the JDBC specification describes the functions.</p><p>Some functions in the following tables are translated but reported as not supported
because they are duplicating or changing their order of the arguments. While this
is harmless for literal values or columns, it will cause problems when using
prepared statements. For example &ldquo;<code>{fn right(?,?)}</code>&rdquo; will be translated to &ldquo;<code>substring(? from (length(?)+1-?))</code>&rdquo;.
As you can see the translated SQL requires more parameters than before the
translation but the driver will not automatically handle this.</p><p><strong>Table 8.1. Supported escaped numeric functions</strong></p><table><thead><tr><th>function</th><th>reported as supported</th><th>translation</th><th>comments</th></tr></thead><tbody><tr><td>abs(arg1)</td><td>yes</td><td>abs(arg1)</td><td></td></tr><tr><td>acos(arg1)</td><td>yes</td><td>acos(arg1)</td><td></td></tr><tr><td>asin(arg1)</td><td>yes</td><td>asin(arg1)</td><td></td></tr><tr><td>atan(arg1)</td><td>yes</td><td>atan(arg1)</td><td></td></tr><tr><td>atan2(arg1,arg2)</td><td>yes</td><td>atan2(arg1,arg2)</td><td></td></tr><tr><td>ceiling(arg1)</td><td>yes</td><td>ceil(arg1)</td><td></td></tr><tr><td>cos(arg1)</td><td>yes</td><td>cos(arg1)</td><td></td></tr><tr><td>cot(arg1)</td><td>yes</td><td>cot(arg1)</td><td></td></tr><tr><td>degrees(arg1)</td><td>yes</td><td>degrees(arg1)</td><td></td></tr><tr><td>exp(arg1)</td><td>yes</td><td>exp(arg1)</td><td></td></tr><tr><td>floor(arg1)</td><td>yes</td><td>floor(arg1)</td><td></td></tr><tr><td>log(arg1)</td><td>yes</td><td>ln(arg1)</td><td></td></tr><tr><td>log10(arg1)</td><td>yes</td><td>log(arg1)</td><td></td></tr><tr><td>mod(arg1,arg2)</td><td>yes</td><td>mod(arg1,arg2)</td><td></td></tr><tr><td>pi(arg1)</td><td>yes</td><td>pi(arg1)</td><td></td></tr><tr><td>power(arg1,arg2)</td><td>yes</td><td>pow(arg1,arg2)</td><td></td></tr><tr><td>radians(arg1)</td><td>yes</td><td>radians(arg1)</td><td></td></tr><tr><td>rand()</td><td>yes</td><td>random()</td><td></td></tr><tr><td>rand(arg1)</td><td>yes</td><td>setseed(arg1)*0+random()</td><td>The seed is initialized with the given argument and a new random value is returned.</td></tr><tr><td>round(arg1,arg2)</td><td>yes</td><td>round(arg1,arg2)</td><td></td></tr><tr><td>sign(arg1)</td><td>yes</td><td>sign(arg1)</td><td></td></tr><tr><td>sin(arg1)</td><td>yes</td><td>sin(arg1)</td><td></td></tr><tr><td>sqrt(arg1)</td><td>yes</td><td>sqrt(arg1)</td><td></td></tr><tr><td>tan(arg1)</td><td>yes</td><td>tan(arg1)</td><td></td></tr><tr><td>truncate(arg1,arg2)</td><td>yes</td><td>trunc(arg1,arg2)</td><td></td></tr></tbody></table><p><strong>Table 8.2. Supported escaped string functions</strong></p><table><thead><tr><th>function</th><th>reported as supported</th><th>translation</th><th>comments</th></tr></thead><tbody><tr><td>ascii(arg1)</td><td>yes</td><td>ascii(arg1)</td><td></td></tr><tr><td>char(arg1)</td><td>yes</td><td>chr(arg1)</td><td></td></tr><tr><td>concat(arg1,arg2&mldr;)</td><td>yes</td><td>(arg1</td><td></td></tr><tr><td>only require the two arguments version, but supporting more arguments</td><td></td><td></td><td></td></tr><tr><td>was so easy&mldr;</td><td></td><td></td><td></td></tr><tr><td>insert(arg1,arg2,arg3,arg4)</td><td>no</td><td>overlay(arg1 placing arg4 from arg2 for arg3)</td><td>This function is not supported since it changes the order of the arguments which can be a problem (for prepared</td></tr><tr><td>statements by example).</td><td></td><td></td><td></td></tr><tr><td>lcase(arg1)</td><td>yes</td><td>lower(arg1)</td><td></td></tr><tr><td>left(arg1,arg2)</td><td>yes</td><td>substring(arg1 for arg2)</td><td></td></tr><tr><td>length(arg1)</td><td>yes</td><td>length(trim(trailing from arg1))</td><td></td></tr><tr><td>locate(arg1,arg2)</td><td>no</td><td>position(arg1 in arg2)</td><td></td></tr><tr><td>locate(arg1,arg2,arg3)</td><td>no</td><td>(arg2*sign(position(arg1 in substring(arg2 from arg3)+position(arg1 in substring(arg2 from arg3))</td><td>Not supported since the three arguments version duplicate and change the order of the arguments.</td></tr><tr><td>ltrim(arg1)</td><td>yes</td><td>trim(leading from arg1)</td><td></td></tr><tr><td>repeat(arg1,arg2)</td><td>yes</td><td>repeat(arg1,arg2)</td><td></td></tr><tr><td>replace(arg1,arg2,arg3)</td><td>yes</td><td>replace(arg1,arg2,arg3)</td><td>Only reported as supported by 7.3 and above servers.</td></tr><tr><td>right(arg1,arg2)</td><td>no</td><td>substring(arg1 from (length(arg1)+1-arg2))</td><td>Not supported since arg2 is duplicated.</td></tr><tr><td>rtrim(arg1)</td><td>yes</td><td>trim(trailing from arg1)</td><td></td></tr><tr><td>space(arg1)</td><td>yes</td><td>repeat(' &lsquo;,arg1)</td><td></td></tr><tr><td>substring(arg1,arg2)</td><td>yes</td><td>substr(arg1,arg2)</td><td></td></tr><tr><td>substring(arg1,arg2,arg3)</td><td>yes</td><td>substr(arg1,arg2,arg3)</td><td></td></tr><tr><td>ucase(arg1)</td><td>yes</td><td>upper(arg1)</td><td></td></tr><tr><td>soundex(arg1)</td><td>no</td><td>soundex(arg1)</td><td>Not supported since it requires the fuzzystrmatch contrib module.</td></tr><tr><td>difference(arg1,arg2)</td><td>no</td><td>difference(arg1,arg2)</td><td>Not supported since it requires the fuzzystrmatch contrib module.</td></tr></tbody></table><p><strong>Table 8.3. Supported escaped date/time functions</strong></p><table><thead><tr><th>function</th><th>reported as supported</th><th>translation</th><th>comments</th></tr></thead><tbody><tr><td>curdate()</td><td>yes</td><td>current_date</td><td></td></tr><tr><td>curtime()</td><td>yes</td><td>current_time</td><td></td></tr><tr><td>dayname(arg1)</td><td>yes</td><td>to_char(arg1,&lsquo;Day&rsquo;)</td><td></td></tr><tr><td>dayofmonth(arg1)</td><td>yes</td><td>extract(day from arg1)</td><td></td></tr><tr><td>dayofweek(arg1)</td><td>yes</td><td>extract(dow from arg1)+1</td><td>We must add 1 to be in the expected 1-7 range.</td></tr><tr><td>dayofyear(arg1)</td><td>yes</td><td>extract(doy from arg1)</td><td></td></tr><tr><td>hour(arg1)</td><td>yes</td><td>extract(hour from arg1)</td><td></td></tr><tr><td>minute(arg1)</td><td>yes</td><td>extract(minute from arg1)</td><td></td></tr><tr><td>month(arg1)</td><td>yes</td><td>extract(month from arg1)</td><td></td></tr><tr><td>monthname(arg1)</td><td>yes</td><td>to_char(arg1,&lsquo;Month&rsquo;)</td><td></td></tr><tr><td>now()</td><td>yes</td><td>now()</td><td></td></tr><tr><td>quarter(arg1)</td><td>yes</td><td>extract(quarter from arg1)</td><td></td></tr><tr><td>second(arg1)</td><td>yes</td><td>extract(second from arg1)</td><td></td></tr><tr><td>week(arg1)</td><td>yes</td><td>extract(week from arg1)</td><td></td></tr><tr><td>year(arg1)</td><td>yes</td><td>extract(year from arg1)</td><td></td></tr><tr><td>timestampadd(argIntervalType,argCount,argTimeStamp)</td><td>yes</td><td>('(interval according to argIntervalType and</td><td></td></tr><tr><td>argCount)'+argTimeStamp)</td><td>an argIntervalType value of SQL_TSI_FRAC_SECOND</td><td></td><td></td></tr><tr><td>is not implemented since backend does not support it</td><td></td><td></td><td></td></tr><tr><td>timestampdiff(argIntervalType,argTimeStamp1,argTimeStamp2)</td><td>not</td><td>extract((interval according to argIntervalType) from argTimeStamp2-argTimeStamp1 )</td><td>only an argIntervalType value of SQL_TSI_FRAC_SECOND, SQL_TSI_FRAC_MINUTE, SQL_TSI_FRAC_HOUR or SQL_TSI_FRAC_DAY is supported</td></tr></tbody></table><p><strong>Table 8.4. Supported escaped misc functions</strong></p><table><thead><tr><th>function</th><th>reported as supported</th><th>translation</th><th>comments</th></tr></thead><tbody><tr><td>database()</td><td>yes</td><td>current_database()</td><td>Only reported as supported by 7.3 and above servers.</td></tr><tr><td>ifnull(arg1,arg2)</td><td>yes</td><td>coalesce(arg1,arg2)</td><td></td></tr><tr><td>user()</td><td>yes</td><td>user</td><td></td></tr></tbody></table><br><div class=prev__next><p><a title="Next page in Date-time escapes" href=https://pgjdbc.github.io/pgjdbc/documentation/chapter8/escapes-datetime/>Date-time escapes | 22</a></p><p><a title="Previous page in PostgreSQL™ Extensions to the JDBC API" href=https://pgjdbc.github.io/pgjdbc/documentation/chapter9/ext/>PostgreSQL™ Extensions to the JDBC API | 24</a></p></div></article><aside></aside></div></main><footer class=footer><div class=footer__items><div class=footer__items__links><ul><li>Pgjdbc</li><li><a href=https://jdbc.postgresql.org/documentation/publicapi/index.html>Public API</a></li><li><a href=https://www.postgresql.org/>About PostgreSql</a></li></ul></div><div class=footer__items__links><ul><li>Community</li><li><a href=https://jdbc.postgresql.org/documentation/publicapi/index.html>Slack</a></li><li><a href=https://www.postgresql.org/>Twitter</a></li><li><a href=https://www.postgresql.org/>Mailing List</a></li></ul></div><div class=footer__items__links><ul><li>More</li><li><a href=https://jdbc.postgresql.org/documentation/publicapi/index.html>FAQ</a></li><li><a href=https://www.postgresql.org/>Privacy</a></li><li><a href=https://www.postgresql.org/>License</a></li></ul></div></div><p class=copyright>Copyright © 1996-2022 The PostgreSQL Global Development Group</p></footer></body></html>